<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Admin — Portfolio Editor</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Plus+Jakarta+Sans:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <!-- Google Identity Services (client-only). Replace CLIENT_ID with your OAuth 2.0 Client ID -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  </head>
  <body>
  <main class="container admin full-bleed">
      <h1>Portfolio Editor</h1>
      <div style="position:absolute;right:18px;top:18px;">
        <select id="theme-select" aria-label="Theme selector" style="padding:8px;border-radius:8px;border:1px solid rgba(15,23,42,0.04)">
          <option value="default">Default</option>
          <option value="dark">Dark</option>
          <option value="warm">Warm</option>
        </select>
      </div>

      <section class="login">
        <h2>Login</h2>
  <p>Sign in with your Google account (use the account you configured for admin access) to edit the site locally.</p>
  <!-- Hidden: manual email input removed from visible UI because Google Sign-In is used -->
  <label for="email" style="display:none;">Email</label>
  <input id="email" type="email" placeholder="you@example.com" style="display:none;">
        <div style="display:flex;gap:8px;align-items:center;margin-top:8px;">
          <!-- Hidden manual sign-in button kept in DOM so existing JS can still reference it -->
          <button id="login-btn" class="btn" style="display:none;">Sign in</button>
          <button id="back-btn" class="btn">Go back</button>
        </div>
        <div style="margin-top:10px">
          <!-- Google Sign-In button will render here. Configure `google-config.json` with your OAuth Client ID and start the dev server. -->
          <div id="g_id_signin"></div>
          <!-- no demo fallback: only real Google Sign-In button will be shown -->
        </div>
        <p id="login-msg" class="muted">Use the <b>Admin</b> sign-in to unlock editing.</p>
        <div id="signed-in-banner" class="hidden signed-in-banner">Signed in as <strong id="signed-in-email">demo user</strong></div>
        <div id="debug-info" class="small muted" style="margin-top:8px"></div>
      </section>

      <section class="editor hidden" id="editor">
        <h2>Content</h2>
        <div style="display:flex;gap:8px;margin-bottom:12px;flex-wrap:wrap;">
          <button id="import-btn" class="btn">Import from site</button>
          <button id="apply-resume-btn" class="btn">Apply resume_text.txt</button>
          <span class="small muted">(Try Import to pull from the live site or Apply Resume to populate fields from the provided resume text)</span>
        </div>
        <label for="name-input">Name</label>
        <input id="name-input" type="text">

        <label for="headline-input">Headline</label>
        <input id="headline-input" type="text">

        <h3>Profile Image</h3>
        <label for="profile-image-url">Image URL</label>
        <input id="profile-image-url" type="url" placeholder="img/velan.jpg">
        <label for="profile-image-file">Or upload image</label>
        <input id="profile-image-file" type="file" accept="image/*">
        <div style="margin-top:8px;">
          <img id="profile-image-preview" src="img/velan.jpg" alt="preview" style="width:96px;border-radius:8px;border:1px solid rgba(0,0,0,0.06)">
        </div>
        <label for="profile-image-caption">Image caption</label>
        <input id="profile-image-caption" type="text" placeholder="e.g. Student at Chennai Institute Of Technology">

        <label for="about-input">About (visual editor)</label>
        <div class="editor-toolbar" data-target="about-input">
          <button type="button" data-cmd="bold" class="btn">B</button>
          <button type="button" data-cmd="italic" class="btn">I</button>
          <button type="button" data-cmd="insertUnorderedList" class="btn">• List</button>
          <button type="button" data-cmd="createLink" class="btn">Link</button>
          <button type="button" data-cmd="removeFormat" class="btn">Clear</button>
        </div>
        <div id="about-input" class="rte" contenteditable="true" role="textbox" aria-multiline="true"></div>

  <h3>Projects</h3>
  <div id="projects-editor"></div>
  <button id="add-project" class="btn">Add Project</button>

        <h3>Skills</h3>
  <h4>Technical Skills</h4>
  <div id="tech-skills-editor"></div>
  <button id="add-tech-skill" class="btn">Add Technical Skill</button>

  <h4>Soft Skills</h4>
  <div id="soft-skills-editor"></div>
  <button id="add-soft-skill" class="btn">Add Soft Skill</button>

  <h3>Internships</h3>
  <div id="internships-editor"></div>
  <button id="add-internship" class="btn">Add Internship</button>

  <p class="muted">Each internship can include company, role, rich text description and an optional link (offer/letter/project).</p>

        <h3>Resume</h3>
        <label for="resume-link">Resume download link</label>
        <input id="resume-link" type="url" placeholder="img/resume.pdf">

        <h3>Contact</h3>
        <label for="contact-email">Email</label>
        <input id="contact-email" type="email">
        <label for="contact-phone">Phone</label>
        <input id="contact-phone" type="text">
        <label for="contact-linkedin">LinkedIn URL</label>
        <input id="contact-linkedin" type="url">

  <h3>Achievements & Certifications</h3>
  <div id="achievements-editor"></div>
  <button id="add-achievement" class="btn">Add Achievement</button>

        <div class="editor-actions">
          <button id="save-btn" class="btn primary">Save</button>
          <button id="logout-btn" class="btn">Logout</button>
        </div>

        <p class="muted">Changes are saved to your browser's localStorage and will be reflected on the main page.</p>
      </section>
    </main>

    <script src="ui.js"></script>
    <!-- Firebase (compat) SDKs for Firestore saving -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
  <!-- Firebase Auth & Storage (compat) -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>
    <script src="app.js"></script>
  </body>
</html>